!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==n.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(t){a[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(t){return!1}}function n(t){var e={};return Object.keys(t).forEach(function(r){return e[_.camelCase(r)]=t[r]}),e}function a(t){if(t.empty()||!t.node().hasAttributes())return{};for(var e=t.node().attributes,r={},a=e.length-1;a>-1;a--){var o=e[a],i=o.name,l=o.value;"data-"===i.substr(0,5)&&(i=i.substr(5)),r[i]=l}return n(r)}function o(t,e){var r={top:0,right:0,bottom:20,left:0},n=800-r.left-r.right,a=400-r.top-r.bottom,o=["#525252","#737373","#969696","#BDBDBD","#D9D9D9"],l=t.cuts,s=t.labels.length,c=e.append("svg").attr("width",n+r.left+r.right).attr("height",a+r.top+r.bottom).call(i).append("g").attr("transform","translate("+r.left+", "+r.top+")"),u=d3.scaleLinear().domain([d3.min(l,function(t){return t.loss}),d3.max(l,function(t){return t.hoss})]).range([a,0]),f=.25;_.forEach(l,function(t,e){return t.level=e}),l.unshift(_.clone(l[0])),l[0].level-=f,l.push(_.clone(l[l.length-1])),l[l.length-1].level+=f;var d=d3.scaleLinear().domain(d3.extent(_.map(l,"level"))).range([0,n]),p=d3.axisBottom(d).ticks(l.length-2).tickFormat(function(t,e){return l[e+1].label}).tickSizeOuter(0);c.append("g").attr("transform","translate(0, "+a+")").call(p);for(var h=["hoss"],y=s-1;y>0;y--)h.unshift("cut"+y);var m=d3.stack().keys(h).offset(function(t,e){for(var r=t.length-1;r>-1;r--)for(var n=0;n<t[r].length;n++)0===r?t[r][n][0]=u.domain()[0]:t[r][n][0]=t[r-1][n][1],r===t.length-1&&(t[r][n][1]=u.domain()[1])}),v=d3.area().x(function(t){return d(t.data.level)}).y0(function(t){return u(t[0])}).y1(function(t){return u(t[1])}).curve(d3.curveCatmullRom.alpha(.5)),b=c.selectAll(".layer").data(m(l)).enter().append("g").attr("class","layer").on("mouseover",function(){d3.select(this).select("path").style("fill-opacity",.5).style("stroke-width",.8),d3.select(this).select("text").style("fill-opacity",1)}).on("mouseout",function(){d3.select(this).select("path").style("fill-opacity",.5).style("stroke-width",.1),d3.select(this).select("text").style("fill-opacity",0)});b.append("path").style("fill",function(t){return d3.scaleOrdinal(o).domain(h)(t.key)}).style("fill-opacity",.5).style("stroke","black").style("stroke-width",.1).attr("d",v),b.append("text").attr("font-size",11).attr("font-family","sans-serif").attr("x",5).attr("y",function(t,e){var r=t[0],n=r[0]+(r[1]-r[0])/2;return u(n)}).attr("dy","0.4em").style("fill-opacity",0).text(function(e,r){return t.labels[r].label}),window.pym&&(new pym.Child).sendHeight()}function i(t){function e(){var e=parseInt(r.style("width"));t.attr("width",e),t.attr("height",Math.round(e/o))}var r=d3.select(t.node().parentNode),n=parseInt(t.style("width")),a=parseInt(t.style("height")),o=n/a;t.attr("viewBox","0 0 "+n+" "+a).attr("preserveAspectRatio","xMinYMid").call(e),d3.select(window).on("resize."+r.attr("id"),e)}var l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,c=(r()?Object.assign:function(t,r){for(var n,a,o=arguments,i=e(t),c=1;c<arguments.length;c++){n=Object(o[c]);for(var u in n)l.call(n,u)&&(i[u]=n[u]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(n);for(var f=0;f<a.length;f++)s.call(n,a[f])&&(i[a[f]]=n[a[f]])}}return i},function(t){var e=Object.create(null);return"string"!=typeof t?e:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var r=t.replace(/\+/g," ").split("="),n=r.shift(),a=r.length>0?r.join("="):void 0;n=decodeURIComponent(n),a=void 0===a?null:decodeURIComponent(a),void 0===e[n]?e[n]=a:Array.isArray(e[n])?e[n].push(a):e[n]=[e[n],a]}),e):e}),u=function(t,e){void 0===t&&(t="body");var r=d3.select(t),i=a(r),l=n(c(location.search)),s=_.defaults(e,i,l),u=s.state;void 0===u&&(u="CO");var f=s.subject,d=s.minYear;void 0===d&&(d=1900);var p=s.maxYear;void 0===p&&(p=2100),u=u.toUpperCase(),d=parseInt(d,10),p=parseInt(p,10),d3.json("https://literasee.github.io/cutscores/"+u+".json",function(t,e){if(t)throw t;var n=_.chain(e.data).tap(function(t){f||(f=t[0].subject)}).filter(function(t){return t.subject===f}).filter(function(t){return d>=t.minYear&&d<=t.maxYear||(p>=t.minYear&&p<=t.maxYear||(d<t.minYear&&p>=t.minYear||(p>t.maxYear&&d<=t.maxYear||void 0)))}).sortBy(e,"maxYear").last().value();o(n,r)})};t.cutscores=u,Object.defineProperty(t,"__esModule",{value:!0})});